
テーブル作成
CREATE TABLE CHANEL (
    CHANEL_ID INT NOT NULL AUTO_INCREMENT,
    CHANEL_NAME VARCHAR(255) NOT NULL,
    PRIMARY KEY (CHANEL_ID)
);

CREATE TABLE SLOT (
    SLOT_ID INT NOT NULL AUTO_INCREMENT,
    CHANEL_ID INT NOT NULL,
    START_TIME DATETIME NOT NULL,
    END_TIME DATETIME NOT NULL,
    PRIMARY KEY (SLOT_ID),
    FOREIGN KEY (CHANEL_ID) REFERENCES CHANEL (CHANEL_ID)
);



CREATE TABLE PROGRAM (
    PROGRAM_ID INT NOT NULL AUTO_INCREMENT,
    TITLE VARCHAR(255) NOT NULL,
    PROGRAM_DETAIL TEXT NOT NULL,
    PRIMARY KEY (PROGRAM_ID)
);



CREATE TABLE GENRE (
    GENRE_ID INT NOT NULL AUTO_INCREMENT,
    GENRE_NAME VARCHAR(255) NOT NULL,
    PRIMARY KEY (GENRE_ID)
);

CREATE TABLE PROGRAM_GENRE (
    PROGRAM_ID INT NOT NULL,
    GENRE_ID INT NOT NULL,
    PRIMARY KEY (PROGRAM_ID, GENRE_ID),
    FOREIGN KEY (PROGRAM_ID) REFERENCES PROGRAM (PROGRAM_ID),
    FOREIGN KEY (GENRE_ID) REFERENCES GENRE (GENRE_ID)
);

CREATE TABLE SEASON (
    SEASON_ID INT NOT NULL AUTO_INCREMENT,
    PROGRAM_ID INT NOT NULL,
    SEASON_NUMBER INT,
    PRIMARY KEY (SEASON_ID),
    FOREIGN KEY (PROGRAM_ID) REFERENCES PROGRAM (PROGRAM_ID)
);



CREATE TABLE EPISODE (
    EPISODE_ID INT NOT NULL AUTO_INCREMENT,
    EPISODE_NUMBER INT ,
    EPISODE_TITLE VARCHAR(255) NOT NULL ,
    SEASON_ID INT NOT NULL,
    EPISODE_DETAIL TEXT NOT NULL,
    VIDEO_TIME INT NOT NULL,
    RELEASE_DATE DATE NOT NULL,
    PRIMARY KEY (EPISODE_ID),
    FOREIGN KEY (SEASON_ID) REFERENCES SEASON (SEASON_ID)
);

CREATE TABLE BROADCAST (
    BROADCAST_ID INT NOT NULL AUTO_INCREMENT,
    SLOT_ID INT NOT NULL,
    EPISODE_ID INT NOT NULL,
    VIEWS INT NOT NULL,
    PRIMARY KEY (BROADCAST_ID),
    FOREIGN KEY (SLOT_ID) REFERENCES SLOT (SLOT_ID),
    FOREIGN KEY (EPISODE_ID) REFERENCES EPISODE (EPISODE_ID)
);

index作成
CREATE INDEX PROGRAM_TITLE ON PROGRAM (PROGRAM_TITLE);
CREATE INDEX INDEX_START ON SLOT (START_TIME);
CREATE INDEX INDEX_CHANEL ON CHANEL (CHANEL_NAME);


テストデータ作成
-- CHANEL テーブルのデータ
INSERT INTO CHANEL (CHANEL_NAME) VALUES ('ドラマ1');
INSERT INTO CHANEL (CHANEL_NAME) VALUES ('ドラマ2');
INSERT INTO CHANEL (CHANEL_NAME) VALUES ('アニメ1');
INSERT INTO CHANEL (CHANEL_NAME) VALUES ('アニメ2');
-- SLOT テーブルのデータ
INSERT INTO SLOT (CHANEL_ID, START_TIME, END_TIME) VALUES (1, '2024-11-01 18:00:00', '2024-11-01 19:00:00');
INSERT INTO SLOT (CHANEL_ID, START_TIME, END_TIME) VALUES (2, '2024-11-01 20:00:00', '2024-11-01 21:00:00');
INSERT INTO SLOT (CHANEL_ID, START_TIME, END_TIME) VALUES (3, '2024-11-01 21:00:00', '2024-11-01 23:00:00');
INSERT INTO SLOT (CHANEL_ID, START_TIME, END_TIME) VALUES (4, '2024-11-01 19:00:00', '2024-11-01 19:30:00');
INSERT INTO SLOT (CHANEL_ID, START_TIME, END_TIME) VALUES (4, '2024-10-25 19:00:00', '2024-11-25 19:30:00');
INSERT INTO SLOT (CHANEL_ID, START_TIME, END_TIME) VALUES (3, '2024-11-02 19:00:00', '2024-11-02 21:00:00');
-- PROGRAM テーブルのデータ
INSERT INTO PROGRAM (TITLE, PROGRAM_DETAIL) VALUES ('鬼滅の刃', 'ジャンプ漫画');
INSERT INTO PROGRAM (TITLE, PROGRAM_DETAIL) VALUES ('君の名', '新海誠の作品');
INSERT INTO PROGRAM (TITLE, PROGRAM_DETAIL) VALUES ('プライド', 'アイスホッケーのドラマ');
INSERT INTO PROGRAM (TITLE, PROGRAM_DETAIL) VALUES ('ルーキーズ', '甲子園のドラマ');
-- SEASON テーブルのデータ
INSERT INTO SEASON (PROGRAM_ID,SEASON_NUMBER) VALUES (1,1);
INSERT INTO SEASON (PROGRAM_ID,SEASON_NUMBER) VALUES (1,2);
INSERT INTO SEASON (PROGRAM_ID,SEASON_NUMBER) VALUES (1,3);
INSERT INTO SEASON (PROGRAM_ID,SEASON_NUMBER) VALUES (1,NULL);
INSERT INTO SEASON (PROGRAM_ID,SEASON_NUMBER) VALUES (2,NULL);
INSERT INTO SEASON (PROGRAM_ID,SEASON_NUMBER) VALUES (3,1);
INSERT INTO SEASON (PROGRAM_ID,SEASON_NUMBER) VALUES (4,1);


-- GENRE テーブルのデータ
INSERT INTO GENRE (GENRE_NAME) VALUES ('戦闘');
INSERT INTO GENRE (GENRE_NAME) VALUES ('恋愛');
INSERT INTO GENRE (GENRE_NAME) VALUES ('スポーツ');

-- PROGRAM_GENRE テーブルのデータ
INSERT INTO PROGRAM_GENRE (PROGRAM_ID, GENRE_ID) VALUES (1, 1);
INSERT INTO PROGRAM_GENRE (PROGRAM_ID, GENRE_ID) VALUES (2, 2);
INSERT INTO PROGRAM_GENRE (PROGRAM_ID, GENRE_ID) VALUES (3, 2);
INSERT INTO PROGRAM_GENRE (PROGRAM_ID, GENRE_ID) VALUES (3, 3);
INSERT INTO PROGRAM_GENRE (PROGRAM_ID, GENRE_ID) VALUES (4, 2);
INSERT INTO PROGRAM_GENRE (PROGRAM_ID, GENRE_ID) VALUES (4, 3);

-- EPISODE テーブルのデータ
INSERT INTO EPISODE (EPISODE_NUMBER, EPISODE_TITLE, SEASON_ID, EPISODE_DETAIL, VIDEO_TIME, RELEASE_DATE) 
VALUES (10, '無残との闘い', 2, '無残と丹次郎との戦い', 30, '2024-10-01');
INSERT INTO EPISODE (EPISODE_NUMBER, EPISODE_TITLE, SEASON_ID, EPISODE_DETAIL, VIDEO_TIME, RELEASE_DATE) 
VALUES (NULL,'映画君の名は', 5,'過去の人物と入れ替わる', 100, '2024-10-08');
INSERT INTO EPISODE (EPISODE_NUMBER, EPISODE_TITLE, SEASON_ID, EPISODE_DETAIL, VIDEO_TIME, RELEASE_DATE) 
VALUES (1, 'アイスホッケーの試合', 6, '強敵と対決する大事な試合', 50, '2024-10-15');
INSERT INTO EPISODE (EPISODE_NUMBER, EPISODE_TITLE, SEASON_ID, EPISODE_DETAIL, VIDEO_TIME, RELEASE_DATE) 
VALUES (3, '上限の鬼との闘い',1 , '赤座との戦い', 30, '2024-10-01');
INSERT INTO EPISODE (EPISODE_NUMBER, EPISODE_TITLE, SEASON_ID, EPISODE_DETAIL, VIDEO_TIME, RELEASE_DATE) 
VALUES (NULL, '映画鬼滅の刃∞列車編', 4, '煉獄と赤座の戦い', 150, '2024-10-01');
-- BROADCAST テーブルのデータ
INSERT INTO BROADCAST (SLOT_ID, EPISODE_ID, VIEWS) VALUES (4, 1, 1500);
INSERT INTO BROADCAST (SLOT_ID, EPISODE_ID, VIEWS) VALUES (2, 3, 1300);
INSERT INTO BROADCAST (SLOT_ID, EPISODE_ID, VIEWS) VALUES (1, 3, 1800);
INSERT INTO BROADCAST (SLOT_ID, EPISODE_ID, VIEWS) VALUES (5, 4, 1600);
INSERT INTO BROADCAST (SLOT_ID, EPISODE_ID, VIEWS) VALUES (6, 5, 1700);








